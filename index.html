<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestor de Cromos de F√∫tbol</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://accounts.google.com/gsi/client" async defer></script>
</head>
<body>
    <!-- LOGIN SCREEN -->
    <section id="loginScreen" class="login-screen active">
        <div class="login-container">
            <div class="login-header">
                <div class="login-icon">‚öΩ</div>
                <h1>Gestor de Cromos</h1>
                <p>Organiza tu colecci√≥n de cromos de f√∫tbol</p>
            </div>
            <div id="g_id_onload"
                 data-client_id="TU_CLIENT_ID.apps.googleusercontent.com"
                 data-callback="handleCredentialResponse"
                 data-auto_prompt="false">
            </div>
            <div class="g_id_signin"
                 data-type="standard"
                 data-size="large"
                 data-theme="filled_green"
                 data-text="signin_with"
                 data-shape="rectangular"
                 data-logo_alignment="left">
            </div>
        </div>
    </section>

    <!-- MAIN APP -->
    <div id="mainApp" class="hidden">
        <!-- HEADER -->
        <header class="app-header">
            <div class="container">
                <div class="header-left">
                    <h1>‚öΩ Gestor de Cromos</h1>
                </div>
                <div class="header-right">
                    <div class="user-menu">
                        <img id="userPhoto" class="user-photo" src="" alt="User">
                        <span id="userName" class="user-name"></span>
                        <button id="btnLogout" class="btn-logout">Salir</button>
                    </div>
                </div>
            </div>
        </header>

        <!-- MAIN CONTENT -->
        <main class="container">
            <!-- VIEW: ALBUMS LIST -->
            <section id="viewAlbums" class="view active">
                <div class="view-header">
                    <h2>Mis √Ålbumes</h2>
                    <div class="actions">
                        <button id="btnNewAlbum" class="btn btn-primary">+ Nuevo √Ålbum</button>
                        <button id="btnManageCategories" class="btn btn-secondary">üìÇ Categor√≠as</button>
                    </div>
                </div>
                <div id="albumsGrid" class="albums-grid">
                    <!-- Albums will be rendered here -->
                </div>
            </section>

            <!-- VIEW: ALBUM DETAIL -->
            <section id="viewAlbumDetail" class="view">
                <div class="view-header">
                    <button id="btnBackToAlbums" class="btn-back">‚Üê Volver</button>
                    <div class="album-info">
                        <h2 id="albumTitle"></h2>
                        <p id="albumMeta"></p>
                    </div>
                    <div class="actions">
                        <button id="btnEditAlbum" class="btn-icon" title="Editar">‚úèÔ∏è</button>
                        <button id="btnDeleteAlbum" class="btn-icon" title="Eliminar">üóëÔ∏è</button>
                    </div>
                </div>

                <div class="stats-bar">
                    <div class="stat">
                        <span class="stat-label">Total</span>
                        <span id="statTotal" class="stat-value">0</span>
                    </div>
                    <div class="stat stat-tengo">
                        <span class="stat-label">Tengo</span>
                        <span id="statTengo" class="stat-value">0</span>
                    </div>
                    <div class="stat stat-falta">
                        <span class="stat-label">Faltan</span>
                        <span id="statFalta" class="stat-value">0</span>
                    </div>
                    <div class="stat stat-repetido">
                        <span class="stat-label">Repetidos</span>
                        <span id="statRepetido" class="stat-value">0</span>
                    </div>
                </div>

                <div class="toolbar">
                    <button id="btnNewCard" class="btn btn-primary">+ A√±adir Cromo</button>
                    <button id="btnViewFalta" class="btn btn-outline">üìã Ver Faltan</button>
                    <button id="btnViewRepetido" class="btn btn-outline">üìã Ver Repetidos</button>
                    <button id="btnImport" class="btn btn-secondary">üì• Importar</button>
                    <button id="btnExport" class="btn btn-secondary">üì§ Exportar</button>
                </div>

                <div id="cardsGrid" class="cards-grid">
                    <!-- Cards will be rendered here -->
                </div>
            </section>
        </main>

        <!-- MODAL: ALBUM FORM -->
        <div id="modalAlbum" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 id="modalAlbumTitle">Nuevo √Ålbum</h3>
                    <button class="btn-close" data-close="modalAlbum">√ó</button>
                </div>
                <form id="formAlbum">
                    <div class="form-group">
                        <label for="albumName">Nombre *</label>
                        <input type="text" id="albumName" required>
                    </div>
                    <div class="form-group">
                        <label for="albumSeason">Temporada</label>
                        <input type="text" id="albumSeason" placeholder="Ej: 2023-2024">
                    </div>
                    <div class="form-group">
                        <label for="albumCompetition">Competici√≥n</label>
                        <input type="text" id="albumCompetition" placeholder="Ej: LaLiga">
                    </div>
                    <div class="modal-actions">
                        <button type="button" class="btn btn-secondary" data-close="modalAlbum">Cancelar</button>
                        <button type="submit" class="btn btn-primary">Guardar</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- MODAL: CARD FORM -->
        <div id="modalCard" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 id="modalCardTitle">Nuevo Cromo</h3>
                    <button class="btn-close" data-close="modalCard">√ó</button>
                </div>
                <form id="formCard">
                    <div class="form-group">
                        <label for="cardNumber">N√∫mero</label>
                        <input type="number" id="cardNumber" required>
                    </div>
                    <div class="form-group">
                        <label for="cardPlayer">Jugador *</label>
                        <input type="text" id="cardPlayer" required>
                    </div>
                    <div class="form-group">
                        <label for="cardTeam">Equipo *</label>
                        <input type="text" id="cardTeam" required>
                    </div>
                    <div class="form-group">
                        <label for="cardCategory">Categor√≠a *</label>
                        <select id="cardCategory" required>
                            <!-- Categories loaded dynamically -->
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="cardStatus">Estado</label>
                        <select id="cardStatus">
                            <option value="falta">Falta</option>
                            <option value="tengo">Tengo</option>
                            <option value="repetido">Repetido</option>
                        </select>
                    </div>
                    <div class="modal-actions">
                        <button type="button" class="btn btn-secondary" data-close="modalCard">Cancelar</button>
                        <button type="submit" class="btn btn-primary">Guardar</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- MODAL: CATEGORIES -->
        <div id="modalCategories" class="modal">
            <div class="modal-content modal-large">
                <div class="modal-header">
                    <h3>Gesti√≥n de Categor√≠as</h3>
                    <button class="btn-close" data-close="modalCategories">√ó</button>
                </div>
                <div class="modal-body">
                    <form id="formCategory" class="inline-form">
                        <input type="text" id="categoryName" placeholder="Nombre categor√≠a" required>
                        <input type="color" id="categoryColor" value="#10B981">
                        <button type="submit" class="btn btn-primary">+ A√±adir</button>
                    </form>
                    <div id="categoriesList" class="categories-list">
                        <!-- Categories rendered here -->
                    </div>
                </div>
            </div>
        </div>

        <!-- MODAL: CARD LIST (Faltan/Repetidos) -->
        <div id="modalCardList" class="modal">
            <div class="modal-content modal-large">
                <div class="modal-header">
                    <h3 id="modalCardListTitle">Cromos</h3>
                    <button class="btn-close" data-close="modalCardList">√ó</button>
                </div>
                <div class="modal-body">
                    <div id="cardListContent" class="card-list">
                        <!-- Cards rendered here -->
                    </div>
                </div>
            </div>
        </div>

        <!-- MODAL: IMPORT -->
        <div id="modalImport" class="modal">
            <div class="modal-content modal-large">
                <div class="modal-header">
                    <h3>Importar Cromos</h3>
                    <button class="btn-close" data-close="modalImport">√ó</button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label>Formato</label>
                        <select id="importFormat">
                            <option value="json">JSON</option>
                            <option value="csv">CSV</option>
                            <option value="txt">TXT (l√≠nea por cromo)</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Archivo o Texto</label>
                        <input type="file" id="importFile" accept=".json,.csv,.txt">
                        <textarea id="importText" rows="10" placeholder="O pega aqu√≠ el contenido..."></textarea>
                    </div>
                    <div class="help-text">
                        <strong>Formato JSON:</strong> [{"number":1,"playerName":"Courtois","team":"Real Madrid","categoryId":1,"status":"tengo"}]<br>
                        <strong>Formato CSV:</strong> number,playerName,team,categoryId,status<br>
                        <strong>Formato TXT:</strong> 1|Courtois|Real Madrid|1|tengo
                    </div>
                    <div class="modal-actions">
                        <button type="button" class="btn btn-secondary" data-close="modalImport">Cancelar</button>
                        <button type="button" id="btnProcessImport" class="btn btn-primary">Importar</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- MODAL: EXPORT -->
        <div id="modalExport" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>Exportar √Ålbum</h3>
                    <button class="btn-close" data-close="modalExport">√ó</button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label>Formato</label>
                        <select id="exportFormat">
                            <option value="json">JSON</option>
                            <option value="csv">CSV</option>
                            <option value="txt">TXT</option>
                        </select>
                    </div>
                    <div class="modal-actions">
                        <button type="button" class="btn btn-secondary" data-close="modalExport">Cancelar</button>
                        <button type="button" id="btnProcessExport" class="btn btn-primary">Descargar</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- LOADER -->
    <div id="loader" class="loader hidden">
        <div class="spinner"></div>
    </div>

    <!-- TOAST -->
    <div id="toast" class="toast"></div>

    <script src="config.js"></script>
    <script src="app.js"></script>
</body>
</html>